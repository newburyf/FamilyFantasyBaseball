// Embed JSON data directly
const allData = {
  2025: {"year": 2025, "participants": [{"id": 4, "name": "Fraser"}, {"id": 5, "name": "Peter"}, {"id": 6, "name": "Hannah"}], "rounds": [{"name": "Wild Card", "draftees": [{"participantID": 4, "draftees": [{"playerID": 608070, "playerLast": "Ram\u00edrez", "teamCode": "CLE", "positionCode": "IF"}, {"playerID": 669373, "playerLast": "Skubal", "teamCode": "DET", "positionCode": "P"}, {"playerID": 665487, "playerLast": "Tatis", "teamCode": "SD", "positionCode": "OF/DH"}]}, {"participantID": 5, "draftees": [{"playerID": 683737, "playerLast": "Busch", "teamCode": "CHC", "positionCode": "IF"}, {"playerID": 592332, "playerLast": "Gausman", "teamCode": "TOR", "positionCode": "P"}, {"playerID": 592450, "playerLast": "Judge", "teamCode": "NYY", "positionCode": "OF/DH"}]}, {"participantID": 6, "draftees": [{"playerID": 518692, "playerLast": "Freeman", "teamCode": "LAD", "positionCode": "IF"}, {"playerID": 676979, "playerLast": "Crochet", "teamCode": "BOS", "positionCode": "P"}, {"playerID": 660271, "playerLast": "Ohtani", "teamCode": "LAD", "positionCode": "OF/DH"}]}], "scores": [{"date": "2025-09-30", "scores": [{"playerID": 608070, "points": 1}, {"playerID": 669373, "points": 31}, {"playerID": 665487, "points": -1}, {"playerID": 683737, "points": 2}, {"playerID": 592450, "points": 1}, {"playerID": 518692, "points": 5}, {"playerID": 676979, "points": 30}, {"playerID": 660271, "points": 10}]}, {"date": "2025-10-01", "scores": [{"playerID": 608070, "points": 4}, {"playerID": 669373, "points": 0}, {"playerID": 665487, "points": 5}, {"playerID": 683737, "points": 0}, {"playerID": 592450, "points": 2}, {"playerID": 518692, "points": 0}, {"playerID": 676979, "points": 0}, {"playerID": 660271, "points": 4}]}, {"date": "2025-10-02", "scores": [{"playerID": 608070, "points": 1}, {"playerID": 669373, "points": 0}, {"playerID": 665487, "points": -3}, {"playerID": 683737, "points": 8}, {"playerID": 592450, "points": 0}, {"playerID": 676979, "points": 0}]}]}, {"name": "Division Series", "draftees": [{"participantID": 4, "draftees": [{"playerID": 663728, "playerLast": "Raleigh", "teamCode": "SEA", "positionCode": "IF"}, {"playerID": 669373, "playerLast": "Skubal", "teamCode": "DET", "positionCode": "P"}, {"playerID": 656941, "playerLast": "Schwarber", "teamCode": "PHI", "positionCode": "OF/DH"}]}, {"participantID": 5, "draftees": [{"playerID": 683737, "playerLast": "Busch", "teamCode": "CHC", "positionCode": "IF"}, {"playerID": 592332, "playerLast": "Gausman", "teamCode": "TOR", "positionCode": "P"}, {"playerID": 592450, "playerLast": "Judge", "teamCode": "NYY", "positionCode": "OF/DH"}]}, {"participantID": 6, "draftees": [{"playerID": 518692, "playerLast": "Freeman", "teamCode": "LAD", "positionCode": "IF"}, {"playerID": 608331, "playerLast": "Fried", "teamCode": "NYY", "positionCode": "P"}, {"playerID": 660271, "playerLast": "Ohtani", "teamCode": "LAD", "positionCode": "OF/DH"}]}], "scores": [{"date": "2025-10-04", "scores": [{"playerID": 663728, "points": 3}, {"playerID": 669373, "points": 0}, {"playerID": 656941, "points": -3}, {"playerID": 683737, "points": 5}, {"playerID": 592332, "points": 14}, {"playerID": 592450, "points": 2}, {"playerID": 518692, "points": 3}, {"playerID": 608331, "points": 0}, {"playerID": 660271, "points": -3}]}, {"date": "2025-10-05", "scores": [{"playerID": 663728, "points": 1}, {"playerID": 669373, "points": 20}, {"playerID": 592332, "points": 0}, {"playerID": 592450, "points": 6}, {"playerID": 608331, "points": -16}]}, {"date": "2025-10-06", "scores": [{"playerID": 656941, "points": -1}, {"playerID": 683737, "points": 0}, {"playerID": 518692, "points": 2}, {"playerID": 660271, "points": 0}]}, {"date": "2025-10-07", "scores": [{"playerID": 663728, "points": 9}, {"playerID": 669373, "points": 0}, {"playerID": 592332, "points": 0}, {"playerID": 592450, "points": 15}, {"playerID": 608331, "points": 0}]}, {"date": "2025-10-08", "scores": [{"playerID": 663728, "points": 2}, {"playerID": 669373, "points": 0}, {"playerID": 656941, "points": 13}, {"playerID": 683737, "points": 5}, {"playerID": 592332, "points": 0}, {"playerID": 592450, "points": 3}, {"playerID": 518692, "points": -2}, {"playerID": 608331, "points": 0}, {"playerID": 660271, "points": -1}]}, {"date": "2025-10-09", "scores": [{"playerID": 656941, "points": 0}, {"playerID": 683737, "points": 5}, {"playerID": 518692, "points": -1}, {"playerID": 660271, "points": -1}]}, {"date": "2025-10-10", "scores": [{"playerID": 663728, "points": 0}, {"playerID": 669373, "points": 27}]}, {"date": "2025-10-11", "scores": [{"playerID": 683737, "points": 2}]}]}, {"name": "Championship Series", "draftees": [{"participantID": 4, "draftees": [{"playerID": 663728, "playerLast": "Raleigh", "teamCode": "SEA", "positionCode": "IF"}, {"playerID": 662139, "playerLast": "Varsho", "teamCode": "TOR", "positionCode": "OF/DH"}, {"playerID": 605483, "playerLast": "Snell", "teamCode": "LAD", "positionCode": "P"}]}, {"participantID": 5, "draftees": [{"playerID": 665489, "playerLast": "Guerrero", "teamCode": "TOR", "positionCode": "IF"}, {"playerID": 694192, "playerLast": "Chourio", "teamCode": "MIL", "positionCode": "OF/DH"}, {"playerID": 592332, "playerLast": "Gausman", "teamCode": "TOR", "positionCode": "P"}]}, {"participantID": 6, "draftees": [{"playerID": 518692, "playerLast": "Freeman", "teamCode": "LAD", "positionCode": "IF"}, {"playerID": 660271, "playerLast": "Ohtani", "teamCode": "LAD", "positionCode": "OF/DH"}, {"playerID": 702056, "playerLast": "Yesavage", "teamCode": "TOR", "positionCode": "P"}]}], "scores": [{"date": "2025-10-12", "scores": [{"playerID": 663728, "points": 5}, {"playerID": 662139, "points": -1}, {"playerID": 702056, "points": 0}, {"playerID": 665489, "points": 0}, {"playerID": 592332, "points": 12}]}, {"date": "2025-10-13", "scores": [{"playerID": 663728, "points": 3}, {"playerID": 662139, "points": -1}, {"playerID": 605483, "points": 35}, {"playerID": 518692, "points": 7}, {"playerID": 660271, "points": 3}, {"playerID": 702056, "points": -3}, {"playerID": 665489, "points": 1}, {"playerID": 694192, "points": -1}, {"playerID": 592332, "points": 0}]}, {"date": "2025-10-14", "scores": [{"playerID": 605483, "points": 0}, {"playerID": 518692, "points": 1}, {"playerID": 660271, "points": 0}, {"playerID": 694192, "points": 5}]}, {"date": "2025-10-15", "scores": [{"playerID": 663728, "points": 5}, {"playerID": 662139, "points": 4}, {"playerID": 702056, "points": 0}, {"playerID": 665489, "points": 14}, {"playerID": 592332, "points": 0}]}, {"date": "2025-10-16", "scores": [{"playerID": 663728, "points": 0}, {"playerID": 662139, "points": -1}, {"playerID": 605483, "points": 0}, {"playerID": 518692, "points": 2}, {"playerID": 660271, "points": 2}, {"playerID": 702056, "points": 0}, {"playerID": 665489, "points": 7}, {"playerID": 694192, "points": -1}, {"playerID": 592332, "points": 0}]}, {"date": "2025-10-17", "scores": [{"playerID": 663728, "points": 7}, {"playerID": 662139, "points": -1}, {"playerID": 605483, "points": 0}, {"playerID": 518692, "points": -1}, {"playerID": 660271, "points": 19}, {"playerID": 702056, "points": 0}, {"playerID": 665489, "points": 3}, {"playerID": 694192, "points": 2}, {"playerID": 592332, "points": 13}]}, {"date": "2025-10-19", "scores": [{"playerID": 663728, "points": -3}, {"playerID": 662139, "points": 1}, {"playerID": 702056, "points": 13}, {"playerID": 665489, "points": 8}, {"playerID": 592332, "points": 0}]}, {"date": "2025-10-20", "scores": [{"playerID": 663728, "points": 6}, {"playerID": 662139, "points": 2}, {"playerID": 702056, "points": 0}, {"playerID": 665489, "points": 0}, {"playerID": 592332, "points": 2}]}]}, {"name": "World Series", "draftees": [{"participantID": 4, "draftees": [{"playerID": 676391, "playerLast": "Clement", "teamCode": "TOR", "positionCode": "IF"}, {"playerID": 662139, "playerLast": "Varsho", "teamCode": "TOR", "positionCode": "OF/DH"}, {"playerID": 605483, "playerLast": "Snell", "teamCode": "LAD", "positionCode": "P"}]}, {"participantID": 5, "draftees": [{"playerID": 665489, "playerLast": "Guerrero", "teamCode": "TOR", "positionCode": "IF"}, {"playerID": 543807, "playerLast": "Springer", "teamCode": "TOR", "positionCode": "OF/DH"}, {"playerID": 592332, "playerLast": "Gausman", "teamCode": "TOR", "positionCode": "P"}]}, {"participantID": 6, "draftees": [{"playerID": 518692, "playerLast": "Freeman", "teamCode": "LAD", "positionCode": "IF"}, {"playerID": 660271, "playerLast": "Ohtani", "teamCode": "LAD", "positionCode": "OF/DH"}, {"playerID": 702056, "playerLast": "Yesavage", "teamCode": "TOR", "positionCode": "P"}]}], "scores": [{"date": "2025-10-24", "scores": [{"playerID": 676391, "points": 3}, {"playerID": 662139, "points": 8}, {"playerID": 605483, "points": -4}, {"playerID": 518692, "points": 1}, {"playerID": 660271, "points": 6}, {"playerID": 702056, "points": 6}, {"playerID": 665489, "points": 4}, {"playerID": 543807, "points": 3}, {"playerID": 592332, "points": 0}]}, {"date": "2025-10-25", "scores": [{"playerID": 676391, "points": 1}, {"playerID": 662139, "points": -1}, {"playerID": 605483, "points": 0}, {"playerID": 518692, "points": 4}, {"playerID": 660271, "points": 2}, {"playerID": 702056, "points": 0}, {"playerID": 665489, "points": 0}, {"playerID": 543807, "points": 2}, {"playerID": 592332, "points": 14}]}, {"date": "2025-10-27", "scores": [{"playerID": 676391, "points": 0}, {"playerID": 662139, "points": 3}, {"playerID": 605483, "points": 0}, {"playerID": 518692, "points": 11}, {"playerID": 660271, "points": 23}, {"playerID": 702056, "points": 0}, {"playerID": 665489, "points": 6}, {"playerID": 543807, "points": -2}, {"playerID": 592332, "points": 0}]}, {"date": "2025-10-28", "scores": [{"playerID": 676391, "points": 3}, {"playerID": 662139, "points": 0}, {"playerID": 605483, "points": 0}, {"playerID": 518692, "points": 1}, {"playerID": 660271, "points": -1}, {"playerID": 702056, "points": 0}, {"playerID": 665489, "points": 9}, {"playerID": 543807, "points": 0}, {"playerID": 592332, "points": 0}]}, {"date": "2025-10-29", "scores": [{"playerID": 676391, "points": 3}, {"playerID": 662139, "points": 4}, {"playerID": 605483, "points": 5}, {"playerID": 518692, "points": -3}, {"playerID": 660271, "points": -1}, {"playerID": 702056, "points": 30}, {"playerID": 665489, "points": 8}, {"playerID": 543807, "points": 0}, {"playerID": 592332, "points": 0}]}]}]},
  2024: {"year": 2024, "participants": [{"id": 1, "name": "Fraser"}, {"id": 2, "name": "Peter"}, {"id": 3, "name": "Hannah & Claire"}], "rounds": [{"name": "Wild Card", "draftees": [{"participantID": 1, "draftees": [{"playerID": 666142, "playerLast": "Ragans", "teamCode": "KC", "positionCode": "P"}, {"playerID": 677951, "playerLast": "Witt", "teamCode": "KC", "positionCode": "IF"}, {"playerID": 670541, "playerLast": "Alvarez", "teamCode": "HOU", "positionCode": "OF/DH"}]}, {"participantID": 2, "draftees": [{"playerID": 656302, "playerLast": "Cease", "teamCode": "SD", "positionCode": "P"}, {"playerID": 650333, "playerLast": "Arraez", "teamCode": "SD", "positionCode": "IF"}, {"playerID": 592450, "playerLast": "Judge", "teamCode": "NYY", "positionCode": "OF/DH"}]}, {"participantID": 3, "draftees": [{"playerID": 669373, "playerLast": "Skubal", "teamCode": "DET", "positionCode": "P"}, {"playerID": 608324, "playerLast": "Bregman", "teamCode": "HOU", "positionCode": "IF"}, {"playerID": 665487, "playerLast": "Tatis", "teamCode": "SD", "positionCode": "OF/DH"}]}], "scores": [{"date": "2024-10-01", "scores": [{"playerID": 666142, "points": 24}, {"playerID": 677951, "points": 2}, {"playerID": 670541, "points": 2}, {"playerID": 656302, "points": 0}, {"playerID": 650333, "points": 2}, {"playerID": 669373, "points": 21}, {"playerID": 608324, "points": 2}, {"playerID": 665487, "points": 8}]}, {"date": "2024-10-02", "scores": [{"playerID": 666142, "points": 0}, {"playerID": 677951, "points": 2}, {"playerID": 670541, "points": 1}, {"playerID": 656302, "points": 0}, {"playerID": 650333, "points": 3}, {"playerID": 669373, "points": 0}, {"playerID": 608324, "points": 1}, {"playerID": 665487, "points": 5}]}]}, {"name": "Division Series", "draftees": [{"participantID": 1, "draftees": [{"playerID": 666142, "playerLast": "Ragans", "teamCode": "KC", "positionCode": "P"}, {"playerID": 677951, "playerLast": "Witt", "teamCode": "KC", "positionCode": "IF"}, {"playerID": 665742, "playerLast": "Soto", "teamCode": "NYY", "positionCode": "OF/DH"}]}, {"participantID": 2, "draftees": [{"playerID": 656302, "playerLast": "Cease", "teamCode": "SD", "positionCode": "P"}, {"playerID": 650333, "playerLast": "Arraez", "teamCode": "SD", "positionCode": "IF"}, {"playerID": 592450, "playerLast": "Judge", "teamCode": "NYY", "positionCode": "OF/DH"}]}, {"participantID": 3, "draftees": [{"playerID": 669373, "playerLast": "Skubal", "teamCode": "DET", "positionCode": "P"}, {"playerID": 547180, "playerLast": "Harper", "teamCode": "PHI", "positionCode": "IF"}, {"playerID": 665487, "playerLast": "Tatis", "teamCode": "SD", "positionCode": "OF/DH"}]}], "scores": [{"date": "2024-10-05", "scores": [{"playerID": 666142, "points": 0}, {"playerID": 677951, "points": -1}, {"playerID": 665742, "points": 3}, {"playerID": 656302, "points": -3}, {"playerID": 650333, "points": 1}, {"playerID": 592450, "points": -1}, {"playerID": 669373, "points": 0}, {"playerID": 547180, "points": 3}, {"playerID": 665487, "points": 6}]}, {"date": "2024-10-06", "scores": [{"playerID": 656302, "points": 0}, {"playerID": 650333, "points": 2}, {"playerID": 547180, "points": 8}, {"playerID": 665487, "points": 16}]}, {"date": "2024-10-07", "scores": [{"playerID": 666142, "points": 8}, {"playerID": 677951, "points": -3}, {"playerID": 665742, "points": -1}, {"playerID": 592450, "points": 1}, {"playerID": 669373, "points": 26}]}, {"date": "2024-10-08", "scores": [{"playerID": 656302, "points": 0}, {"playerID": 650333, "points": 0}, {"playerID": 547180, "points": 1}, {"playerID": 665487, "points": 7}]}, {"date": "2024-10-09", "scores": [{"playerID": 666142, "points": 0}, {"playerID": 677951, "points": 1}, {"playerID": 665742, "points": 4}, {"playerID": 656302, "points": -7}, {"playerID": 650333, "points": 1}, {"playerID": 592450, "points": 0}, {"playerID": 669373, "points": 0}, {"playerID": 547180, "points": 3}, {"playerID": 665487, "points": 1}]}, {"date": "2024-10-10", "scores": [{"playerID": 666142, "points": 0}, {"playerID": 677951, "points": 2}, {"playerID": 665742, "points": 1}, {"playerID": 592450, "points": 6}, {"playerID": 669373, "points": 0}]}, {"date": "2024-10-11", "scores": [{"playerID": 656302, "points": 0}, {"playerID": 650333, "points": 1}, {"playerID": 665487, "points": -1}]}, {"date": "2024-10-12", "scores": [{"playerID": 669373, "points": 5}]}]}, {"name": "Championship Series", "draftees": [{"participantID": 1, "draftees": [{"playerID": 640455, "playerLast": "Manaea", "teamCode": "NYM", "positionCode": "P"}, {"playerID": 596019, "playerLast": "Lindor", "teamCode": "NYM", "positionCode": "IF"}, {"playerID": 665742, "playerLast": "Soto", "teamCode": "NYY", "positionCode": "OF/DH"}]}, {"participantID": 2, "draftees": [{"playerID": 500779, "playerLast": "Quintana", "teamCode": "NYM", "positionCode": "P"}, {"playerID": 677587, "playerLast": "Rocchio", "teamCode": "CLE", "positionCode": "IF"}, {"playerID": 592450, "playerLast": "Judge", "teamCode": "NYY", "positionCode": "OF/DH"}]}, {"participantID": 3, "draftees": [{"playerID": 607074, "playerLast": "Rod\u00f3n", "teamCode": "NYY", "positionCode": "P"}, {"playerID": 624413, "playerLast": "Alonso", "teamCode": "NYM", "positionCode": "IF"}, {"playerID": 680757, "playerLast": "Kwan", "teamCode": "CLE", "positionCode": "OF/DH"}]}], "scores": [{"date": "2024-10-13", "scores": [{"playerID": 640455, "points": 0}, {"playerID": 596019, "points": 0}, {"playerID": 500779, "points": 0}, {"playerID": 624413, "points": 0}]}, {"date": "2024-10-14", "scores": [{"playerID": 640455, "points": 14}, {"playerID": 596019, "points": 9}, {"playerID": 665742, "points": 7}, {"playerID": 500779, "points": 0}, {"playerID": 677587, "points": 6}, {"playerID": 592450, "points": 2}, {"playerID": 607074, "points": 24}, {"playerID": 624413, "points": 3}, {"playerID": 680757, "points": 2}]}, {"date": "2024-10-15", "scores": [{"playerID": 665742, "points": 2}, {"playerID": 677587, "points": 0}, {"playerID": 592450, "points": 8}, {"playerID": 607074, "points": 0}, {"playerID": 680757, "points": 3}]}, {"date": "2024-10-16", "scores": [{"playerID": 640455, "points": 0}, {"playerID": 596019, "points": -2}, {"playerID": 500779, "points": 0}, {"playerID": 624413, "points": -2}]}, {"date": "2024-10-17", "scores": [{"playerID": 640455, "points": 0}, {"playerID": 596019, "points": 0}, {"playerID": 665742, "points": 1}, {"playerID": 500779, "points": -9}, {"playerID": 677587, "points": 2}, {"playerID": 592450, "points": 4}, {"playerID": 607074, "points": 0}, {"playerID": 624413, "points": 0}, {"playerID": 680757, "points": 2}]}, {"date": "2024-10-18", "scores": [{"playerID": 640455, "points": 0}, {"playerID": 596019, "points": 8}, {"playerID": 665742, "points": 8}, {"playerID": 500779, "points": 0}, {"playerID": 677587, "points": 2}, {"playerID": 592450, "points": 1}, {"playerID": 607074, "points": 0}, {"playerID": 624413, "points": 13}, {"playerID": 680757, "points": 7}]}, {"date": "2024-10-19", "scores": [{"playerID": 665742, "points": 11}, {"playerID": 677587, "points": 1}, {"playerID": 592450, "points": -2}, {"playerID": 607074, "points": 10}, {"playerID": 680757, "points": 1}]}, {"date": "2024-10-20", "scores": [{"playerID": 640455, "points": -12}, {"playerID": 596019, "points": 2}, {"playerID": 500779, "points": 0}, {"playerID": 624413, "points": 3}]}]}, {"name": "World Series", "draftees": [{"participantID": 1, "draftees": [{"playerID": 543037, "playerLast": "Cole", "teamCode": "NYY", "positionCode": "P"}, {"playerID": 605141, "playerLast": "Betts", "teamCode": "LAD", "positionCode": "IF"}, {"playerID": 665742, "playerLast": "Soto", "teamCode": "NYY", "positionCode": "OF/DH"}]}, {"participantID": 2, "draftees": [{"playerID": 596133, "playerLast": "Weaver", "teamCode": "NYY", "positionCode": "P"}, {"playerID": 571771, "playerLast": "Hern\u00e1ndez", "teamCode": "LAD", "positionCode": "IF"}, {"playerID": 592450, "playerLast": "Judge", "teamCode": "NYY", "positionCode": "OF/DH"}]}, {"participantID": 3, "draftees": [{"playerID": 607074, "playerLast": "Rod\u00f3n", "teamCode": "NYY", "positionCode": "P"}, {"playerID": 519203, "playerLast": "Rizzo", "teamCode": "NYY", "positionCode": "IF"}, {"playerID": 669242, "playerLast": "Edman", "teamCode": "LAD", "positionCode": "OF/DH"}]}], "scores": [{"date": "2024-10-25", "scores": [{"playerID": 543037, "points": 16}, {"playerID": 605141, "points": 3}, {"playerID": 665742, "points": 4}, {"playerID": 596133, "points": 10}, {"playerID": 571771, "points": 3}, {"playerID": 592450, "points": -2}, {"playerID": 607074, "points": 0}, {"playerID": 519203, "points": 0}, {"playerID": 669242, "points": 4}]}, {"date": "2024-10-26", "scores": [{"playerID": 543037, "points": 0}, {"playerID": 605141, "points": 2}, {"playerID": 665742, "points": 8}, {"playerID": 596133, "points": 0}, {"playerID": 571771, "points": 0}, {"playerID": 592450, "points": -3}, {"playerID": 607074, "points": -3}, {"playerID": 519203, "points": 0}, {"playerID": 669242, "points": 8}]}, {"date": "2024-10-28", "scores": [{"playerID": 543037, "points": 0}, {"playerID": 605141, "points": 3}, {"playerID": 665742, "points": 1}, {"playerID": 596133, "points": 2}, {"playerID": 571771, "points": 2}, {"playerID": 592450, "points": 0}, {"playerID": 607074, "points": 0}, {"playerID": 519203, "points": 2}, {"playerID": 669242, "points": 1}]}, {"date": "2024-10-29", "scores": [{"playerID": 543037, "points": 0}, {"playerID": 605141, "points": 2}, {"playerID": 665742, "points": 2}, {"playerID": 596133, "points": 9}, {"playerID": 571771, "points": -1}, {"playerID": 592450, "points": 5}, {"playerID": 607074, "points": 0}, {"playerID": 519203, "points": -1}, {"playerID": 669242, "points": 4}]}, {"date": "2024-10-30", "scores": [{"playerID": 543037, "points": 18}, {"playerID": 605141, "points": 5}, {"playerID": 665742, "points": 6}, {"playerID": 596133, "points": 8}, {"playerID": 571771, "points": 5}, {"playerID": 592450, "points": 11}, {"playerID": 607074, "points": 0}, {"playerID": 519203, "points": -1}, {"playerID": 669242, "points": 1}]}]}]}
};

const availableYears = Object.keys(allData).sort();

document.addEventListener("DOMContentLoaded", () => {
  const yearSelect = document.getElementById("year-select");
  const statsContainer = document.getElementById("stats-container");

  availableYears.forEach(year => {
    const option = document.createElement("option");
    option.value = year;
    option.textContent = year;
    yearSelect.appendChild(option);
  });

  yearSelect.value = availableYears[availableYears.length - 1]
  loadStats(availableYears[availableYears.length - 1]);

  yearSelect.addEventListener("change", e => loadStats(e.target.value));

  function loadStats(year) {
    const data = allData[year];
    renderStats(data);
  }

  function sortByPos(playerList) {
    newList = [null, null, null]

    for(let i = 0; i < newList.length; i++) {

      if(playerList[i].positionCode === "P") {
        newList[0] = playerList[i];

      } else if(playerList[i].positionCode === "IF") {
        newList[1] = playerList[i];
      
      } else {
        newList[2] = playerList[i];
      }

    }
    return newList
  }

  function renderStats(data) {
    statsContainer.innerHTML = "";

    // Initialize totals once per year to carry over between rounds
    const participantTotals = {};
    data.participants.forEach(p => participantTotals[p.name] = 0);

    data.rounds.forEach(round => {
      const roundDiv = document.createElement("div");
      roundDiv.classList.add("round");

      const heading = document.createElement("h2");
      heading.textContent = round.name;
      roundDiv.appendChild(heading);

      const grouped = {};
      round.draftees.forEach(d => {
        const participant = data.participants.find(p => p.id === d.participantID);
        if (!grouped[participant.name]) grouped[participant.name] = [];
        d.draftees.forEach(player => grouped[participant.name].push(player));
      });

      const table = document.createElement("table");
      const thead = document.createElement("thead");
      const tbody = document.createElement("tbody");

      const rowParticipants = document.createElement("tr");
      rowParticipants.innerHTML = `<th rowspan="2">Date</th>`;
      Object.entries(grouped).forEach(([participant, pl]) => {
        const th = document.createElement("th");
        th.colSpan = pl.length + 1;
        th.textContent = participant;
        rowParticipants.appendChild(th);
      });
      thead.appendChild(rowParticipants);

      const rowPlayers = document.createElement("tr");
      Object.entries(grouped).forEach(([participant, pl]) => {
        pl = sortByPos(pl)
        pl.forEach(player => {
          const th = document.createElement("th");
          th.textContent = `${player.playerLast} (${player.teamCode}-${player.positionCode})`;
          rowPlayers.appendChild(th);
        });
        const thTotal = document.createElement("th");
        thTotal.textContent = "Total";
        rowPlayers.appendChild(thTotal);
      });
      thead.appendChild(rowPlayers);

      round.scores.forEach(day => {
        const row = document.createElement("tr");
        const dateCell = document.createElement("td");
        dateCell.textContent = formatDate(day.date);
        row.appendChild(dateCell);

        Object.entries(grouped).forEach(([participant, pl]) => {
          let participantDayTotal = 0;
          pl = sortByPos(pl)
          pl.forEach(player => {
            const scoreObj = day.scores.find(s => s.playerID === player.playerID);
            const points = scoreObj ? scoreObj.points : 0;
            participantDayTotal += points;

            const td = document.createElement("td");
            const scoreText = scoreObj ? scoreObj.points : "-";
            td.textContent = scoreText;
            row.appendChild(td);
          });

          // Add today's points to running total
          participantTotals[participant] += participantDayTotal;
          const tdTotal = document.createElement("td");
          tdTotal.textContent = participantTotals[participant];
          row.appendChild(tdTotal);
        });

        tbody.appendChild(row);
      });

      table.appendChild(thead);
      table.appendChild(tbody);
      roundDiv.appendChild(table);
      statsContainer.appendChild(roundDiv);
    });
  }

  function formatDate(isoDate) {
    const [year, month, day] = isoDate.split("-");
    const monthNames = [
      "January", "February", "March", "April", "May", "June",
      "July", "August", "September", "October", "November", "December"
    ];
    return `${monthNames[parseInt(month, 10) - 1]} ${parseInt(day, 10)}`;
  }
});